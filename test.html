<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test - Quicklearn</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #00c9ff, #92fe9d);
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background-color: #004d40;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 20px;
    }

    .container {
      display: flex;
      flex: 1;
      padding: 20px;
    }

    .question-area {
      flex: 3;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
      border-radius: 15px;
      padding: 20px;
      margin-right: 20px;
      color: #333;
    }

    .sidebar {
      flex: 1;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
      border-radius: 15px;
      padding: 20px;
      color: #333;
    }

    .question {
      font-size: 18px;
      margin-bottom: 15px;
    }

    .options label {
      display: block;
      margin: 8px 0;
    }

    .buttons {
      margin-top: 20px;
    }

    .buttons button {
      margin: 5px;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      background-color: #ff9800;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    .buttons button:hover {
      background-color: #f57c00;
    }

    .timer {
      font-size: 18px;
      font-weight: bold;
      color: #fff;
    }

    .question-status {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .question-status div {
      width: 30px;
      height: 30px;
      background-color: #eee;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      font-weight: bold;
      cursor: pointer;
    }

    .answered {
      background-color: #4caf50;
      color: white;
    }

    .review {
      background-color: #ffeb3b;
    }

    .unanswered {
      background-color: #f44336;
      color: white;
    }
  </style>
</head>
<body onload="checkLogin(); startTimer(); loadQuestion(0);">
  <header>
    Quicklearn Test Portal â€” <span class="timer" id="timer">Time Left: 60:00</span>
  </header>

  <div class="container">
    <div class="question-area">
      <div class="question" id="questionText"></div>
      <div class="options" id="options"></div>

      <div class="buttons">
        <button onclick="prevQuestion()">Previous</button>
        <button onclick="markForReview()">Mark for Review</button>
        <button onclick="saveAnswer()">Save</button>
        <button onclick="nextQuestion()">Next</button>
        <button onclick="submitTest()">Final Submit</button>
      </div>
    </div>

    <div class="sidebar">
      <h3>Question Status</h3>
      <div class="question-status" id="statusPanel"></div>
    </div>
  </div>

  <script>
    let questions = [];
    let current = 0;
    let answers = Array(30).fill(null);
    let reviewFlags = Array(30).fill(false);

    // Sample questions (you can expand these)
    for (let i = 0; i < 10; i++) {
      questions.push({ section: "Aptitude", text: `Aptitude Q${i + 1}`, options: ["A", "B", "C", "D"] });
    }
    for (let i = 0; i < 10; i++) {
      questions.push({ section: "Reasoning", text: `Reasoning Q${i + 1}`, options: ["A", "B", "C", "D"] });
    }
    for (let i = 0; i < 10; i++) {
      questions.push({ section: "Verbal", text: `Verbal Q${i + 1}`, options: ["A", "B", "C", "D"] });
    }

    function loadQuestion(index) {
      current = index;
      const q = questions[index];
      document.getElementById("questionText").innerText = `${index + 1}. (${q.section}) ${q.text}`;
      const opts = q.options.map((opt, i) => `
        <label><input type="radio" name="option" value="${opt}" ${answers[index] === opt ? "checked" : ""}/> ${opt}</label>
      `).join("");
      document.getElementById("options").innerHTML = opts;
      updateStatusPanel();
    }

    function saveAnswer() {
      const selected = document.querySelector('input[name="option"]:checked');
      if (selected) {
        answers[current] = selected.value;
      }
      updateStatusPanel();
    }

    function markForReview() {
      reviewFlags[current] = true;
      updateStatusPanel();
    }

    function nextQuestion() {
      if (current < questions.length - 1) loadQuestion(current + 1);
    }

    function prevQuestion() {
      if (current > 0) loadQuestion(current - 1);
    }

    function updateStatusPanel() {
      const panel = document.getElementById("statusPanel");
      panel.innerHTML = "";
      for (let i = 0; i < questions.length; i++) {
        let className = "unanswered";
        if (answers[i]) className = "answered";
        if (reviewFlags[i]) className = "review";
        panel.innerHTML += `<div class="${className}" onclick="loadQuestion(${i})">${i + 1}</div>`;
      }
    }

    function submitTest() {
      alert("Test submitted successfully!");
      window.location.href = "results.html";
    }

    function checkLogin() {
      if (!localStorage.getItem("loggedIn")) {
        alert("Please login to access the test.");
        window.location.href = "login.html";
      }
    }

    function startTimer(duration = 3600) {
      let timer = duration;
      const display = document.getElementById("timer");

      const interval = setInterval(() => {
        const minutes = Math.floor(timer / 60);
        const seconds = timer % 60;
        display.textContent = `Time Left: ${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
        if (--timer < 0) {
          clearInterval(interval);
          alert("Time's up!");
          submitTest();
        }
      }, 1000);
    }
  </script>
</body>
</html>
